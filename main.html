
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Credit Account Default Status and Characteristics &#8212; Homework 7 Book</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Credit Account Default Status and Characteristics" href="README.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Homework 7 Book</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="README.html">
   Credit Account Default Status and Characteristics
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Credit Account Default Status and Characteristics
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/main.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fmain.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/main.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-cleaning-and-serialization">
   Data Cleaning and Serialization
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#eda">
   EDA
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-intuition">
     Data Intuition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#target">
     Target
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ratio-of-default-vs-non-default-for-different-groups">
   Ratio of Default vs Non-Default for different groups
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#gender">
     Gender
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#gender-and-income">
       Gender and Income
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loan-type">
     Loan Type
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#income-type">
     Income Type
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#education-type">
     Education Type
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-ownership">
     House Ownership
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-type">
     House Type
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#number-of-surrounding-30dpd-defaults">
     Number of Surrounding 30DPD Defaults
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#number-of-family-members">
     Number of Family Members
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#some-data-takeaways">
     Some Data Takeaways
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#logistic-regression-model">
   Logistic Regression Model
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#feature-selection-and-modeling">
     Feature Selection and Modeling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#results">
     Results
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusions">
   Conclusions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#authors-contribution">
   Authors Contribution
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Credit Account Default Status and Characteristics</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-cleaning-and-serialization">
   Data Cleaning and Serialization
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#eda">
   EDA
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-intuition">
     Data Intuition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#target">
     Target
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ratio-of-default-vs-non-default-for-different-groups">
   Ratio of Default vs Non-Default for different groups
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#gender">
     Gender
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#gender-and-income">
       Gender and Income
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loan-type">
     Loan Type
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#income-type">
     Income Type
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#education-type">
     Education Type
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-ownership">
     House Ownership
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-type">
     House Type
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#number-of-surrounding-30dpd-defaults">
     Number of Surrounding 30DPD Defaults
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#number-of-family-members">
     Number of Family Members
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#some-data-takeaways">
     Some Data Takeaways
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#logistic-regression-model">
   Logistic Regression Model
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#feature-selection-and-modeling">
     Feature Selection and Modeling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#results">
     Results
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusions">
   Conclusions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#authors-contribution">
   Authors Contribution
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="credit-account-default-status-and-characteristics">
<h1>Credit Account Default Status and Characteristics<a class="headerlink" href="#credit-account-default-status-and-characteristics" title="Permalink to this headline">¶</a></h1>
<p>Data source: <a class="reference external" href="https://www.kaggle.com/datasets/mishra5001/credit-card?datasetId=263888&amp;select=application_data.csv">https://www.kaggle.com/datasets/mishra5001/credit-card?datasetId=263888&amp;select=application_data.csv</a> (select all columns when downloading)</p>
<p>Detailed data and columns description and also be found using this link, under Data and Data Explorer-columns_description.csv</p>
<p>Credit history matters a lot when individuals want to take out loans … say more about this later</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">hw7_tools.plot_tools</span> <span class="k">as</span> <span class="nn">pt</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Important Note:</strong> Original data can be downloaded with the link provided above and our repo does not contain the original raw dataset due to its size(&gt;100mb) exceeding GitHub’s limit. Instead, we uploaded in our repo a slightly cleaned, serialized version of the data, but you can download the original dataset locally and check by uncommenting the code that we used to clean and serialize our data in <code class="docutils literal notranslate"><span class="pre">details.ipynb</span></code>.</p>
<div class="section" id="data-cleaning-and-serialization">
<h2>Data Cleaning and Serialization<a class="headerlink" href="#data-cleaning-and-serialization" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;null_index.npy&#39;</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;COMMONAREA_MEDI&#39; &#39;COMMONAREA_AVG&#39; &#39;COMMONAREA_MODE&#39;
 &#39;NONLIVINGAPARTMENTS_MODE&#39; &#39;NONLIVINGAPARTMENTS_AVG&#39;
 &#39;NONLIVINGAPARTMENTS_MEDI&#39; &#39;FONDKAPREMONT_MODE&#39; &#39;LIVINGAPARTMENTS_MODE&#39;
 &#39;LIVINGAPARTMENTS_AVG&#39; &#39;LIVINGAPARTMENTS_MEDI&#39; &#39;FLOORSMIN_AVG&#39;
 &#39;FLOORSMIN_MODE&#39; &#39;FLOORSMIN_MEDI&#39; &#39;YEARS_BUILD_MEDI&#39; &#39;YEARS_BUILD_MODE&#39;
 &#39;YEARS_BUILD_AVG&#39; &#39;OWN_CAR_AGE&#39; &#39;LANDAREA_MEDI&#39; &#39;LANDAREA_MODE&#39;
 &#39;LANDAREA_AVG&#39; &#39;BASEMENTAREA_MEDI&#39; &#39;BASEMENTAREA_AVG&#39; &#39;BASEMENTAREA_MODE&#39;
 &#39;EXT_SOURCE_1&#39; &#39;NONLIVINGAREA_MODE&#39; &#39;NONLIVINGAREA_AVG&#39;
 &#39;NONLIVINGAREA_MEDI&#39; &#39;ELEVATORS_MEDI&#39; &#39;ELEVATORS_AVG&#39; &#39;ELEVATORS_MODE&#39;
 &#39;WALLSMATERIAL_MODE&#39; &#39;APARTMENTS_MEDI&#39; &#39;APARTMENTS_AVG&#39; &#39;APARTMENTS_MODE&#39;
 &#39;ENTRANCES_MEDI&#39; &#39;ENTRANCES_AVG&#39; &#39;ENTRANCES_MODE&#39; &#39;LIVINGAREA_AVG&#39;
 &#39;LIVINGAREA_MODE&#39; &#39;LIVINGAREA_MEDI&#39; &#39;HOUSETYPE_MODE&#39;]
</pre></div>
</div>
</div>
</div>
<p>After some initial exploration of our data, we can check that all the above columns contain more than 50% in our case of nulls values, and here we make one of our major assumptions in this EDA that these missing data are simply unknown and can introduce bias which can affect our analysis(as opposed to them being actually informative and revealing something in our data). Future work might involve taking a deeper look into these columns, but for now, with this assumption in mind, we will drop these columns together with some additional columns like ID number, which we expect to be not useful in our analysis:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_feather</span><span class="p">(</span><span class="s2">&quot;data/serialized.fth&quot;</span><span class="p">)</span> <span class="c1"># read cleaned, serialized data</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>FLOORSMAX_MODE</th>
      <th>FLOORSMAX_MEDI</th>
      <th>FLOORSMAX_AVG</th>
      <th>YEARS_BEGINEXPLUATATION_MODE</th>
      <th>YEARS_BEGINEXPLUATATION_MEDI</th>
      <th>YEARS_BEGINEXPLUATATION_AVG</th>
      <th>TOTALAREA_MODE</th>
      <th>EMERGENCYSTATE_MODE</th>
      <th>OCCUPATION_TYPE</th>
      <th>EXT_SOURCE_3</th>
      <th>...</th>
      <th>FLAG_MOBIL</th>
      <th>DAYS_ID_PUBLISH</th>
      <th>DAYS_REGISTRATION</th>
      <th>DAYS_EMPLOYED</th>
      <th>DAYS_BIRTH</th>
      <th>REGION_POPULATION_RELATIVE</th>
      <th>NAME_HOUSING_TYPE</th>
      <th>NAME_FAMILY_STATUS</th>
      <th>NAME_EDUCATION_TYPE</th>
      <th>NAME_INCOME_TYPE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0833</td>
      <td>0.0833</td>
      <td>0.0833</td>
      <td>0.9722</td>
      <td>0.9722</td>
      <td>0.9722</td>
      <td>0.0149</td>
      <td>No</td>
      <td>Laborers</td>
      <td>0.139376</td>
      <td>...</td>
      <td>1</td>
      <td>-2120</td>
      <td>-3648.0</td>
      <td>-637</td>
      <td>-9461</td>
      <td>0.018801</td>
      <td>House / apartment</td>
      <td>Single / not married</td>
      <td>Secondary / secondary special</td>
      <td>Working</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.2917</td>
      <td>0.2917</td>
      <td>0.2917</td>
      <td>0.9851</td>
      <td>0.9851</td>
      <td>0.9851</td>
      <td>0.0714</td>
      <td>No</td>
      <td>Core staff</td>
      <td>NaN</td>
      <td>...</td>
      <td>1</td>
      <td>-291</td>
      <td>-1186.0</td>
      <td>-1188</td>
      <td>-16765</td>
      <td>0.003541</td>
      <td>House / apartment</td>
      <td>Married</td>
      <td>Higher education</td>
      <td>State servant</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>None</td>
      <td>Laborers</td>
      <td>0.729567</td>
      <td>...</td>
      <td>1</td>
      <td>-2531</td>
      <td>-4260.0</td>
      <td>-225</td>
      <td>-19046</td>
      <td>0.010032</td>
      <td>House / apartment</td>
      <td>Single / not married</td>
      <td>Secondary / secondary special</td>
      <td>Working</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>None</td>
      <td>Laborers</td>
      <td>NaN</td>
      <td>...</td>
      <td>1</td>
      <td>-2437</td>
      <td>-9833.0</td>
      <td>-3039</td>
      <td>-19005</td>
      <td>0.008019</td>
      <td>House / apartment</td>
      <td>Civil marriage</td>
      <td>Secondary / secondary special</td>
      <td>Working</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>None</td>
      <td>Core staff</td>
      <td>NaN</td>
      <td>...</td>
      <td>1</td>
      <td>-3458</td>
      <td>-4311.0</td>
      <td>-3038</td>
      <td>-19932</td>
      <td>0.028663</td>
      <td>House / apartment</td>
      <td>Single / not married</td>
      <td>Secondary / secondary special</td>
      <td>Working</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 80 columns</p>
</div></div></div>
</div>
</div>
<div class="section" id="eda">
<h2>EDA<a class="headerlink" href="#eda" title="Permalink to this headline">¶</a></h2>
<p>In the following parts of our analysis, we will identify some interesting findings in our data and attempt to build a logistic regression model to predict whether a customer will default or not. But for now, let us explore the different variables in our datasets.</p>
<p>First, we look at the overall rough distribution of several features we are initially interested in through boxplots:</p>
<div class="section" id="data-intuition">
<h3>Data Intuition<a class="headerlink" href="#data-intuition" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/feature_plot.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_12_0.png" src="_images/main_12_0.png" />
</div>
</div>
<p>While some of the distributions look reasonable, we also observe that there are obviously some strange outliers, for example in the case of days employed, there is a single point who is employed for 350000+ days, and in the AMT_TOTAL_INCOME plot, we also see a client with 100 million in income! This plot is for our initial exploratory purpose only and it perfectly illustrates one important characteristic of our dataset which is that there are errors/extreme individuals, and they might require a closer examination if we plan to use them in further analysis.</p>
<p>In our case, since we plan to be using AMT_TOTAL_INCOME, we try to take into account of this issue of having extreme/unreliable values by looking at quantiles instead to minimize the impact of such outliers.</p>
</div>
<div class="section" id="target">
<h3>Target<a class="headerlink" href="#target" title="Permalink to this headline">¶</a></h3>
<p>Next, we then proceed to looking at the general picture of what is the proportion of people using credit cards who are able to pay on time vs those who failed to pay on time(“TARGET” column).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/target_plot.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_16_0.png" src="_images/main_16_0.png" />
</div>
</div>
<p>Notice that there the original data has a high class imbalance, so we might want to bear this fact in mind when performing logistic regression and considering the metrics to look at when evaluating classifiers later.</p>
</div>
</div>
<div class="section" id="ratio-of-default-vs-non-default-for-different-groups">
<h2>Ratio of Default vs Non-Default for different groups<a class="headerlink" href="#ratio-of-default-vs-non-default-for-different-groups" title="Permalink to this headline">¶</a></h2>
<p>We will now examine the ratio of defaulters vs non-defaulters between some other categorical variables’ groups</p>
<div class="section" id="gender">
<h3>Gender<a class="headerlink" href="#gender" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/Gender.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_20_0.png" src="_images/main_20_0.png" />
</div>
</div>
<p><strong>Observations:</strong></p>
<ul class="simple">
<li><p>Males seem to have a slightly higher proportion of defaults compared to female</p></li>
</ul>
<div class="section" id="gender-and-income">
<h4>Gender and Income<a class="headerlink" href="#gender-and-income" title="Permalink to this headline">¶</a></h4>
<p>To further investigate the relationship between default risk and gender, we will manually divide income into 5 groups by percentile ranking and see how gender and default rate varies between these different income groups:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/gender_income_plot.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_24_0.png" src="_images/main_24_0.png" />
</div>
</div>
<p>This might be surprising, but we observe that females have an overall higher count of defaults, and in the occasions where males have a higher default count in the higher income groups, they only “win” by a slight amount. This is opposite to what we observed in the previous section, where males were observed to have a slightly higher proportion of defaults compared to female. The reason is that, if you remembered, there are almost <strong>double the amount of female entries vs male entries</strong> in our original dataset!</p>
<p>Given the class imbalance in gender, we created a plotting function that generates the proportion of defaults of each gender, accounted for the different total counts in gender, and now this new proportion plot give a much more accurate depiction of our actual data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/balanced_plot.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_27_0.png" src="_images/main_27_0.png" />
</div>
</div>
<p><strong>Observations:</strong></p>
<ul class="simple">
<li><p>We now see that, indeed, males seem to have a overall higher rate of default, and this is especially the case in higher income groups, as the gap keeps increasing with income and doubles in the two highest income groups. This is a very interesting observation and further studies might be conducted on this in the future to explore what exactly is contributing to this observation.</p></li>
</ul>
</div>
</div>
<div class="section" id="loan-type">
<h3>Loan Type<a class="headerlink" href="#loan-type" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/Loan.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_30_0.png" src="_images/main_30_0.png" />
</div>
</div>
<p><strong>Observations:</strong></p>
<ul class="simple">
<li><p>People who take out cash loans have a slightly higher rate of defaulting compared to revolving loans</p></li>
</ul>
</div>
<div class="section" id="income-type">
<h3>Income Type<a class="headerlink" href="#income-type" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/Income Type.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_33_0.png" src="_images/main_33_0.png" />
</div>
</div>
<p><strong>Observations:</strong></p>
<ul class="simple">
<li><p>Unemployed and Maternity leave groups seem to have a much higher proportion of default, whereas state servents and pensioners tend to have a lower proportion of defaults among them.</p></li>
</ul>
</div>
<div class="section" id="education-type">
<h3>Education Type<a class="headerlink" href="#education-type" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/Education.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_36_0.png" src="_images/main_36_0.png" />
</div>
</div>
<p><strong>Observations:</strong></p>
<ul class="simple">
<li><p>The academic degree and higher education group have a lower proportion of defaults compared to the other groups that are slightly lower in educational degree status</p></li>
</ul>
</div>
<div class="section" id="house-ownership">
<h3>House Ownership<a class="headerlink" href="#house-ownership" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/House Ownership.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_39_0.png" src="_images/main_39_0.png" />
</div>
</div>
<p><strong>Observations:</strong></p>
<ul class="simple">
<li><p>Whether someone owns a house or not does not change significantly the rates of defaulting on a loan</p></li>
</ul>
</div>
<div class="section" id="house-type">
<h3>House Type<a class="headerlink" href="#house-type" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/House Type.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_42_0.png" src="_images/main_42_0.png" />
</div>
</div>
<p><strong>Observations:</strong></p>
<ul class="simple">
<li><p>Despite significant class imbalance where the vast majority of people have a home/apartment, the highest rates of defaulting in the house type category are those who live in a rented apartment. Higher default rates are also seen for those that live with their parents.</p></li>
</ul>
</div>
<div class="section" id="number-of-surrounding-30dpd-defaults">
<h3>Number of Surrounding 30DPD Defaults<a class="headerlink" href="#number-of-surrounding-30dpd-defaults" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/Number of Surrounding 30DPD Defaults.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_45_0.png" src="_images/main_45_0.png" />
</div>
</div>
<p><strong>Observations:</strong></p>
<ul class="simple">
<li><p>With the increase in the number of surrounding 30day default cases, we also see a general increase in default proportion.</p></li>
</ul>
</div>
<div class="section" id="number-of-family-members">
<h3>Number of Family Members<a class="headerlink" href="#number-of-family-members" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/Number of Family Members.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_48_0.png" src="_images/main_48_0.png" />
</div>
</div>
<p><strong>Observations:</strong></p>
<ul class="simple">
<li><p>With the increase in the number of family numbers, we also see a slight upward trend in default proportion.</p></li>
</ul>
<p>*Note that we did remove the extreme outliers on the right end for the above two discrete data plotting in order to achieve better visualization clarity, and future work might include more detailed analysis on the outliers.</p>
</div>
<div class="section" id="some-data-takeaways">
<h3>Some Data Takeaways<a class="headerlink" href="#some-data-takeaways" title="Permalink to this headline">¶</a></h3>
<p>The plots above give a clear picture about the type of people within the data. The majority of people are working, female, own a home, are living in a home/apartment, and have 0 surrounding 30DPD defaults. It can also be seen that the max education for the majority of people in the data is a secondary education, which in the USA, refers to completing high school. It is interesting to see just how many people in the data own an apartment or house as it is significantly higher than for example the number of people renting. With that said, the data population really is not representative of the overall population as a whole.</p>
</div>
</div>
<div class="section" id="logistic-regression-model">
<h2>Logistic Regression Model<a class="headerlink" href="#logistic-regression-model" title="Permalink to this headline">¶</a></h2>
<p>The modeling section focuses on building a logistic regression model to try and predict whether someone will default on a loan or not given particular parameters from the data. As seens in the previous section, there is significant class imbalance where the vast majority of people in the data do not default on their loan. Thus metrics such as recall and precision are more important tools to determine the validity of our model compared to accuracy.</p>
<div class="section" id="feature-selection-and-modeling">
<h3>Feature Selection and Modeling<a class="headerlink" href="#feature-selection-and-modeling" title="Permalink to this headline">¶</a></h3>
<p>Here we pick our features and also create dummy variables for the categorical features.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;NAME_CONTRACT_TYPE&#39;</span><span class="p">,</span><span class="s1">&#39;CODE_GENDER&#39;</span><span class="p">,</span><span class="s1">&#39;NAME_INCOME_TYPE&#39;</span><span class="p">,</span><span class="s1">&#39;NAME_EDUCATION_TYPE&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;FLAG_OWN_CAR&#39;</span><span class="p">,</span><span class="s1">&#39;NAME_FAMILY_STATUS&#39;</span><span class="p">,</span><span class="s1">&#39;OBS_30_CNT_SOCIAL_CIRCLE&#39;</span><span class="p">,</span><span class="s1">&#39;CNT_FAM_MEMBERS&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;FLAG_OWN_REALTY&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;output/reg_matrix.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_57_0.png" src="_images/main_57_0.png" />
</div>
</div>
<p>train_precision = 0.5565637783562662 vs test_precision = 0.09927200529450694</p>
<p>train_recall = 0.7483 vs test_recall = 0.7545271629778671</p>
</div>
<div class="section" id="results">
<h3>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h3>
<p>To account for the class imbalance, a very important characteristic of our data that could significantly affect our model predictions, we tried to balance the training set through random undersampling of the 0 group and also adjusting the threshold to a point where we have high recall while maintaining a normal precision. We especially want higher recall since in reality, we would want to mark, ideally, everyone who is actually going to default, and recall penalized false negatives, giving us this ideal prediction. We also would not worry about marking someone suspicious and likely to default, because in reality these false positives will be easy to clear out by providing addition supplementary materials, like bank statements, credit rating scores, etc. Note that while both the training and test sets have a relative high recall, the precision is very low on the test set, mainly because the test set is not manually balanced and retains this trait of highly imbalanced classes from the original data.</p>
<p>We can also take a look at the coefficients and have an idea of which features contributes the most to predicting default risk:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_feather</span><span class="p">(</span><span class="s2">&quot;output/coef.fth&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>feature</th>
      <th>coeff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>13</td>
      <td>NAME_INCOME_TYPE_Unemployed</td>
      <td>2.971938</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9</td>
      <td>NAME_INCOME_TYPE_Maternity leave</td>
      <td>1.005744</td>
    </tr>
    <tr>
      <th>2</th>
      <td>18</td>
      <td>NAME_EDUCATION_TYPE_Lower secondary</td>
      <td>0.769081</td>
    </tr>
    <tr>
      <th>3</th>
      <td>19</td>
      <td>NAME_EDUCATION_TYPE_Secondary / secondary special</td>
      <td>0.329509</td>
    </tr>
    <tr>
      <th>4</th>
      <td>27</td>
      <td>NAME_FAMILY_STATUS_Single / not married</td>
      <td>0.261468</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="conclusions">
<h2>Conclusions<a class="headerlink" href="#conclusions" title="Permalink to this headline">¶</a></h2>
<p>Throughout our EDA, we were able to find some very interesting relations on how default ratios differed in different groups. By looking at the coefficients from our simple logistic regression model, we were also able to confirm many of the relationships we discovered in the distribution and proportion plots. From what we have created, some major influencers of credit risks include being unemployed, on maternity leave, or having lower education status. We also visualized and found out that there are differences in default proportions among genders, and that judging by our data, male seems to have more default rate, especially in high income brackets.</p>
<p>While we think the results especially for the gender and income are quite convincing and also intuitive, we have to acknoledge that this is just a simple EDA and is far from sufficient if we want to establish stronger relationship such as causation. Throughout our notebook we also noted ideas suitable for future, more in-depth analysis, and our reproducibility efforts put in for this research will, ideally, enable future work to be easily built upon the current analysis and results.</p>
</div>
<div class="section" id="authors-contribution">
<h2>Authors Contribution<a class="headerlink" href="#authors-contribution" title="Permalink to this headline">¶</a></h2>
<p>Joe: Joe added to Uma’s initial version of EDA, serialized the data and intermediate results, created the functions(plotting and logistic regression) and the tools packages, added docstrings and tests for the functions and also wrote texts on the methods and analysis for the notebook.</p>
<p>Uma: Uma began the EDA and wrote the backup code towards the end(deleted for cleanness of the final versions but can be found on earlier versions of the notebook). She also wrote the initial code for the logistic regression modeling as well as set up the binder link.</p>
<p>Isaac: Isaac created the environment fiels as well as initiated the building of the hw7_tools library and the inital tests. He also turned the repo into a jupyter-book that can be viewed on GitHub Pages.</p>
<p><strong>Overall the three members collaborated and contributed with equal efforts.</strong></p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "hw7_env"
        },
        kernelOptions: {
            kernelName: "hw7_env",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'hw7_env'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="README.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Credit Account Default Status and Characteristics</p>
        </div>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Uma, Joe, Isaac<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>